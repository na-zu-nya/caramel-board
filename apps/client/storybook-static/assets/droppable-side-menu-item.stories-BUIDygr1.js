import{r as s,u as k,j as d}from"./iframe-DRhwVLvc.js";import{a as C}from"./utils-DvmR7Bys.js";import{S as D}from"./side-menu-bU9aJgIW.js";import{S as I}from"./star-sXhfiEUj.js";import"./preload-helper-Dp1pzeXC.js";import"./CountBadge-Htaiq6NA.js";import"./index-ev99PfxJ.js";import"./index-f6_0lWT1.js";import"./index-SDABdUj-.js";import"./x-DUuMXKGJ.js";import"./createLucideIcon-C6efQrdH.js";import"./check-BFu3tv4p.js";var S=s.createContext(void 0),x=t=>{const e=s.useContext(S);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e};function w({acceptDrop:t=!0,onDrop:e}){const{isDragging:m}=k(),a=x(),[u,i]=s.useState(!1),y=s.useCallback(r=>{!t||!e||(r.preventDefault(),r.stopPropagation(),i(!0))},[t,e]),b=s.useCallback(r=>{r.preventDefault(),r.stopPropagation(),i(!1)},[]),h=s.useCallback(async r=>{if(r.preventDefault(),r.stopPropagation(),i(!1),!t||!e)return;const o=r.dataTransfer.getData("text/plain");let n=[];if(o.startsWith("stack-items:"))n=o.replace("stack-items:","").split(",").map(Number).filter(Boolean);else if(o.startsWith("stack-item:")){const l=Number(o.replace("stack-item:",""));l&&(n=[l])}else{const l=Number(o);l&&(n=[l])}n.length!==0&&(await(e==null?void 0:e(n)),await Promise.all([a.invalidateQueries({queryKey:["stacks"]}),a.invalidateQueries({queryKey:["tags"]}),a.invalidateQueries({queryKey:["collections"]}),a.invalidateQueries({queryKey:["collection-folders"]})]))},[t,e,a]);return{isDragOver:u,showDropIndicator:!!(t&&e&&m&&u),containerProps:{onDragOver:y,onDragLeave:b,onDrop:h}}}function g({acceptDrop:t=!0,onStacksDrop:e,className:m,...a}){const{containerProps:u,showDropIndicator:i}=w({acceptDrop:t,onDrop:e});return d.jsx("div",{...u,className:C("relative transition-all duration-200",i&&"bg-blue-50 ring-2 ring-blue-400 ring-inset rounded"),children:d.jsx(D,{className:m,...a})})}g.__docgenInfo={description:"",methods:[],displayName:"DroppableSideMenuItem",props:{acceptDrop:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},onStacksDrop:{required:!1,tsType:{name:"signature",type:"function",raw:"(stackIds: number[]) => Promise<void> | void",signature:{arguments:[{type:{name:"Array",elements:[{name:"number"}],raw:"number[]"},name:"stackIds"}],return:{name:"union",raw:"Promise<void> | void",elements:[{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"},{name:"void"}]}}},description:""}},composes:["Omit"]};const F={title:"SideMenu/DroppableItem",component:g},c={args:{asChild:!0,icon:I,label:"Favorites",count:12,onStacksDrop:async t=>console.log("dropped",t),children:d.jsx("a",{href:"#favorites"})}};var p,f,v;c.parameters={...c.parameters,docs:{...(p=c.parameters)==null?void 0:p.docs,source:{originalSource:`{
  args: {
    asChild: true,
    icon: Star,
    label: 'Favorites',
    count: 12,
    onStacksDrop: async (ids: number[]) => console.log('dropped', ids),
    children: <a href="#favorites" />
  }
}`,...(v=(f=c.parameters)==null?void 0:f.docs)==null?void 0:v.source}}};const W=["AsLink"];export{c as AsLink,W as __namedExportsOrder,F as default};
